이미지 삽입? 파일관리를 어떻게 해야하지  
일단 크롬 브라우저 스토리지 구조를 먼저 살펴봐야 할듯  

가능하면 따로 로컬에서 스크립트 돌리는거 없이 확장프로그램만 가지고 처리하고 싶어서 구현할거면 사용자가 Ctrl+V로 이미지 넣으려고 하면 해당 이미지를 브라우저에 임시 id 붙여서 파일로 저장하고 그걸 불러오는 방식으로 써야할듯  

사용자가 지운 이미지를 판단하는건 이제 설정창에 들어가서 전체 이미지 목록 <- 이거 버튼 누르면 안에 이미지랑 id, 그리고 이미지 확대해서 보는 옵션이랑 이미지 휴지통으로 보내는 옵션 필요할듯  
그리고 이 이미지가 어느 노트에 사용이 되고있는지 이미지쪽 메타데이터에 같이 넣어두고 노트쪽도 내가 어떤 이미지를 사용하고 있는지 id를 불러오는 방식으로 구현하면 되지 않을?까  

아니다 배열을 하나 만들어서 노트 id - 노트에서 사용되는 이미지 id 이런식으로 저장하게 하고 이미지 목록 들어갈때마다 (+ 가능하면 일정시간마다 노트 순회공연 함 조지면서) 리스트 갱신하고 만약 이미지가 어떤 노트에서도 사용이 안되고 있다? 그러면 이제 삭제 목록에 올려두는거지

이미지 삭제기능 구현할땐 좀 고민해야 할듯  
일단 사용 안되는 이미지는 바로 휴지통으로 보내버려도 되는데 사용중인 이미지는 안지워지게 or 삭제할때 앞에 창 하나 띄우면서 이 노트들에서 사용되고 있는데 ㄱㅊ? 하고 보여주는 정도로 처리해야 할듯  
이제 노트들 목록 보여줄땐 해당 노트들을 클릭할 수 있게 해서 클릭하면 바로 해당 이미지가 사용되는 부분으로 이동해서 창을 보여주는 기능도 가능하면 구현하는게 좋을것 같고  

아 근데 이러면 다운받을때 좀 골때리겠다

일단 export 파일 구조를 지금같은 .json 확장자만 바꿔둔게 아니라 .zip 으로 바꾸고 안에 마크다운 파일이랑 이미지를 구조화해서 넣는 방식으로 구현해야 겨우 가능할듯

마크다운에 이미지를 base64같은거로 때려박으면 파일 편집할때도 힘들고 무엇보다 확장프로그램 편집기 안에서 관리하기가 너무 불편해짐  

그럼 일단 개별 노트 저장구조부터 생각을 해보면
```
[노트이름].md
metadata.json
images/이미지들
```
대충 이런 구조로 가면될듯

그리고 노트 여러개를 한번에 다운받는 .snotes은 구조를 노트 id를 이름으로 갖는 폴더 안에 개별노트 저장하는 폴더구조로 저장하거나 아니면 앗싸리 그냥 노트들을 다 .snote 파일로 만든다음 그걸 압축하는 방식으로 할까?  
근데 웹페이지에서 임시로 파일을 만들어저 저장하는게 될까 싶기도 하고 검색좀 해봐야 할듯  

metadata.json파일 안에는 뭐넣어야 되지  
일단 넣어야 되는건 지금도 쓰고있는 정보들인 노트 생성시간, 노트 마지막 편집시간, 노트 타이틀, 그리고 노트별 개별 설정 등등으로 하면 될듯  
이제 설정 따로 export 해서 그걸 다시 불러올땐 노트 제목이랑 편집시간 관련된건 다 빼고 설정만 불러오는 방식으로 하면 꼬이는거 없이 구현이 될것같음  

아 맞다 단축키

Ctrl+B : 강조  
Ctrl+S : 취소선  
Ctrl+I : 이탤릭체  
Ctrl+V : 텍스트/이미지 붙여넣기 <- 이미지는 따로 구현해야 할듯  

근데 단축키는 위지윅 지원할때 하던가 해야할것 같음 안그러면 충돌나지 않을까 싶은 느낌적인 느낌  

이제 되나?  
되나보네  

이제 해야할거  
- [ ] 저장구조 바꾸기      
- [ ] 단일 노트 파일인 .snote 저장구조를 기존 json 에 있는 제목, 메타데이터, 설정을 담고 있는 .json 파일과 본문 내용을 담고있는 .md 파일, 혹시 있을 경우 images/ 폴더를 만들어서 폴더 안에 이미지 넣어두기  
- [ ] 여러 노트를 동시에 저장하는 .snotes 
- [ ] 이미지를 붙여넣으면 image_id 구조로 이미지 전용 id를 부여해서 따로 로컬 스토리지에 저장하기  
- [ ] 이미지를 붙여넣으면 마크다운에선 `![이미지 id](images/image_이미지id.확장자)` 이런식으로 경로를 저장하고 프리뷰 화면에선 해당 id를 바탕으로 이미지 불러오기  
- [ ] 

